<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Detalle de Pago</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link rel="stylesheet" href="/webjars/bootstrap/5.3.3/css/bootstrap.min.css"/>
    <script th:src="@{/js/main.js}" defer></script>
</head>
<body>
<div class="container mt-5">
    <h1>Detalle de Pago</h1>
    <table class="table table-bordered">
        <tr><th>ID</th><td th:text="${payment.id}"></td></tr>
        <tr><th>Fecha</th><td th:text="${payment.date}"></td></tr>
        <tr><th>Monto</th><td th:text="${payment.amount}"></td></tr>
        <tr><th>Estado</th><td th:text="${payment.status}"></td></tr>

        <!-- Friendly bank error message when payment failed -->
        <tr th:if="${friendlyMessage != null}">
            <th>Mensaje</th>
            <td>
                <div class="alert alert-danger" th:text="${friendlyMessage}">Fallo en el pago (ver detalles)</div>
            </td>
        </tr>

        <!-- Cuenta de origen or Tarjeta (controller provides isCard/maskedCard) -->
        <tr th:if="${!isCard}">
            <th>Cuenta Origen</th>
            <td th:text="${payment.payerAccount}">-</td>
        </tr>
        <tr th:if="${isCard}">
            <th>Tarjeta</th>
            <td th:text="${maskedCard}">-</td>
        </tr>

        <tr><th>Cuenta Destino</th><td th:text="${payment.destinationAccount}"></td></tr>
        <tr><th>Descripci√≥n</th><td th:text="${payment.description}"></td></tr>
    </table>
    <a th:href="@{'/backoffice/payments'}" class="btn btn-secondary mt-3">Volver a la lista</a>
</div>
<script src="/webjars/bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>
